;(function(d){var a,f,c,e,b;b=d(window).width();f=new Date(1,1,2000);c=false;e=200;d(window).resize(function(){var g=d(window).width();if(Math.abs(g-b)<30){return}b=g;f=new Date();if(c===false){c=true;setTimeout(a.resizeThrottle,e)}});a={animateTiles:function(q){var u,r,p,v,o,t,g,n,m,l,w,s,h,k;if(!q){return}v=q.node;g=q.grid;n=q.animation;m=q.settings;n.stepProgress+=1;if(n.stepProgress===g.classIds.length){n.stepProgress=0;if(n.status==="openingTile"){n.step+=1;if(n.step===n.steps){g.status="openTile";n.status="off";n.stepProgress=-1;v.trigger("shuffleStop",a.setEvent(q));a.onTileOpen(g.selectedTile,q);return}}else{if(n.status==="closingTile"){n.step-=1;if(n.step===-1){g.status="home";n.status="off";n.stepProgress=-1;v.trigger("shuffleStop",a.setEvent(q));if(g.selectedTile){d("."+g.selectedTile,v).click()}else{if(g.openTile){d("."+g.openTile,v).click()}else{if(m.deepLinking){document.location.hash=v.attr("id")+"-home"}v.removeClass("animating")}}return}}}}else{if(n.status!=="off"){return}}if(n.status==="off"){if(g.status==="home"){a.setAnimation(d(this),q);n.step=0;n.status="openingTile";if(g.columns===2&&g.classIds.length<=4){v.animate({height:"+="+g.tileHeight},m.openSpeed/4)}}else{if(g.status==="openTile"){n.step=n.steps-1;n.status="closingTile";a.onTileClose(g.selectedTile,q);if(g.columns===2&&g.classIds.length<=4){v.animate({height:"-="+g.tileHeight},m.closeSpeed/4)}}}u=d(this).data("classId");if(d.inArray(u,g.classIds)===-1){u=false}g.selectedTile=u;v.trigger("shuffleStart",a.setEvent(q))}l=function(){a.animateTiles.apply(d(this),[d(this).parent().data("data")])};t=m.animationEasing;o=(n.status==="openingTile")?m.openSpeed/n.steps:m.closeSpeed/n.steps;for(r=0;r<g.tiles.length;r+=1){w=g.tiles[r];for(p=0;p<w.length;p+=1){h=w[p].animation;s=(n.status==="openingTile")?h[n.step][0]:h[n.step][1];if(s){w[p].node.animate(s,o,t,l);k=(n.status==="openingTile")?h[n.step][2]:h[n.step][3];a.animateTileContent(w[p].node,k,o,m)}else{n.stepProgress+=1}}}},animateTileContent:function(i,j,k,h){var g=i.data("data").contentStyles;d.each(g,function(n,p){var m,l,o,q;if(n===false||!j||!p[j]){return true}m=p.node;q=p[j];l={};o={};d.each(q,function(s,r){if(isNaN(r)){o[s]=r}else{l[s]=r}});m.css(o);m.animate(l,k,h.animationEasing)})},setAnimation:function(h,r){var t,k,l,u,s,p,g,n,o,m,v,q,w;g=r.grid;n=r.settings;o=r.animation;t=h.data("data").row;k=h.data("data").column;l=[{},{},{},{},{},{}];m=g.classIds.length;if(g.columns===3){if(h.hasClass("wide-tile")){v=h.data("classId");p=0;d.each(g.classIds,function(x,j){j=String(j);if(v===j){l[x].steps=[{w:3/m,c:(x/m)*3},{r:0},{w:3,c:0},{h:1.75},"wide-tile"]}else{l[x].steps=[{w:3/m,c:(x/m)*3},{h:0.25,r:1.75},{w:(1/(m-1))*3,c:(p/(m-1))*3},{},"wide-button"];p+=1}})}else{if(t===0){if(k===0){l[0].steps=[{w:1},{w:2},{h:1.33},{h:2},"open-tile"];l[1].steps=[{h:[0.5,-2,-2,1]},{c:2},{},{},"half-tile"];l[2].steps=[{h:[0.5,-2,-2,1],r:[0.5,-2,-2,1]},{},{},{},"half-tile"];l[3].steps=[{h:[0.33,0.5,1]},{c:2},{},{},"one-third-tile"];l[4].steps=[{r:[1.33,1.5],h:[0.67,0.5]},{h:[0.33,0.5]},{c:2},{},"one-third-tile"];l[5].steps=[{},{r:1.67,h:0.33},{},{},"one-third-tile"]}else{if(k===1){l[0].steps=[{h:[0.67,-2,-2,1]},{},{},{},"two-thirds-tile"];l[1].steps=[{h:[0.67,-2,-2,1]},{w:2},{w:2},{h:2},"open-tile"];l[2].steps=[{h:[0.33,-2,-2,1],r:[0.67,-2,-2,1]},{c:[1,-2,-2,1]},{c:0},{},"one-third-tile"];l[3].steps=[{h:[0.33,0.5,1,1]},{r:[-1,1.5,-1]},{},{},"one-third-tile"];l[4].steps=[{h:[0.67,0.5]},{r:[1.33,-1],h:[0.33,-1]},{c:0},{},"one-third-tile"];l[5].steps=[{h:0.33,r:1.67},{c:0},{},{},"one-third-tile"]}else{if(k===2){l[0].steps=[{h:[0.5,-2,-2,1]},{},{},{},"half-tile"];l[1].steps=[{h:[0.5,-2,-2,1],r:[0.5,-2,-2,1]},{c:0},{},{},"half-tile"];l[2].steps=[{h:1.33},{h:1.67},{h:2},{w:2,c:1},"open-tile"];l[3].steps=[{h:[0.33,0.5,1]},{},{},{},"one-third-tile"];l[4].steps=[{h:[0.67,0.5]},{h:[0.33,-1],r:[1.33,1.5]},{c:0},{},"one-third-tile"];l[5].steps=[{h:0.33,r:1.67},{c:0},{},{},"one-third-tile"]}}}}else{if(t===1){if(k===0){l[0].steps=[{h:[0.33,-2,0.5]},{c:[2,-2,1]},{c:[-1,-2,2]},{h:[-1,-2,1]},"one-third-tile"];l[1].steps=[{h:[0.33,-2,0.5],r:[0.33,-2,0.5]},{},{c:2},{r:[-1,-2,1]},"one-third-tile"];l[2].steps=[{h:[0.33,-2,0.5],r:[0.67,-2,0.5]},{r:[-1,-2,1.5]},{},{},"one-third-tile"];l[3].steps=[{},{w:1},{w:2},{h:2,r:0},"open-tile"];l[4].steps=[{h:[0.5,1]},{c:2},{},{},"half-tile"];l[5].steps=[{h:0.5,r:1.5},{},{},{},"half-tile"]}else{if(k===1){l[0].steps=[{h:0.33},{c:2},{},{},"one-third-tile"];l[1].steps=[{h:0.67,r:0.33},{h:0.33},{c:2},{},"one-third-tile"];l[2].steps=[{h:0.33,r:0.67},{},{},{},"one-third-tile"];l[3].steps=[{h:0.67},{c:2},{h:[-1,1]},{},"half-tile"];l[4].steps=[{h:0.33,r:1.67},{w:2,c:0},{c:0},{h:2,r:0},"open-tile"];l[5].steps=[{h:0.33,r:1.67},{},{},{},"half-tile"]}else{if(k===2){l[0].steps=[{h:0.33},{},{},{},"one-third-tile"];l[1].steps=[{h:0.67},{h:0.33,r:0.33},{c:0},{},"one-third-tile"];l[2].steps=[{h:0.33,r:0.67},{c:0},{},{},"one-third-tile"];l[3].steps=[{h:0.5},{},{},{},"half-tile"];l[4].steps=[{h:0.5,r:1.5},{c:0},{},{},"half-tile"];l[5].steps=[{},{w:2,c:1},{c:1},{r:0,h:2},"open-tile"]}}}}}}}else{if(g.columns===2){if(t===0){if(k===0){l[0].steps=[{h:1},{h:1},{w:2},{w:2},{h:2},"open-tile"];l[1].steps=[{h:1.5},{r:1,h:[0.5,-2,-2,1]},{},{c:[0,-2,-2,1]},{r:2},"half-tile"];l[2].steps=[{h:[0.5,-2,-2,1],r:1.5},{},{},{},{r:[2.5,-2,-2,2]},"half-tile"];l[3].steps=[{h:[0.33,-2,1,1],r:1.67},{r:2},{},{h:[-2,0.5]},{},"one-third-tile"];l[4].steps=[{h:0.33,r:2.33},{c:1},{h:[-2,0.5]},{r:[-2,2.5]},{},"one-third-tile"];l[5].steps=[{h:0.33,r:2.67},{},{},{},{},"one-third-tile"]}else{if(k===1){l[0].steps=[{h:[0.5,-2,-2,0.5],r:[0.5,-2,-2,0.5]},{r:1},{r:2,h:[-2,-2,-2,1]},"half-tile"];l[1].steps=[{h:0.5},{w:2,c:0},{h:2},"open-tile"];l[2].steps=[{h:[0.5,-2,-2,1],r:[1.5,-2,-2,1],c:[-2,-2,-2,1]},{},{r:[2.5,-2,-2,2]},"half-tile"];l[3].steps=[{h:[0.33,-2,1],r:1.67},{r:2},{h:[-2,0.5]},"one-third-tile"];l[4].steps=[{h:[0.33,0.5],r:[2.33,2.5]},{c:1},{},"one-third-tile"];l[5].steps=[{h:0.33,r:2.67},{},{},"one-third-tile"]}}}else{if(t===1){if(k===0){l[0].steps=[{h:[0.5,-2,-2,1]},{},{r:2},{h:[-1,-2,-2,1]},"half-tile"];l[1].steps=[{h:[0.5,-2,-2,1],r:[0.5,-2,-2,2]},{c:[0,-2,-2,1]},{r:[2.5,-2,-2,2]},{},"half-tile"];l[2].steps=[{},{c:1},{h:2,r:0},{c:0,w:2},"open-tile"];l[3].steps=[{h:[0.33,-2,1],r:2},{},{r:[-1,2]},{h:[-1,0.5]},"one-third-tile"];l[4].steps=[{h:0.33,r:2.33},{c:1},{h:[-1,0.5]},{r:[-1,2.5]},"one-third-tile"];l[5].steps=[{h:0.33,r:2.67},{},{},{},"one-third-tile"]}else{if(k===1){l[0].steps=[{h:0.5},{},{r:2},{},"half-tile"];l[1].steps=[{h:0.5,r:0.5},{c:0},{r:2.5},{},"half-tile"];l[2].steps=[{h:0.33,r:2},{c:1},{},{h:[-1,0.5,1]},"one-third-tile"];l[3].steps=[{},{},{h:2,r:0},{c:0,w:2},"open-tile"];l[4].steps=[{h:0.33,r:2.33},{c:1},{h:[-1,0.5]},{r:[-1,2.5]},"one-third-tile"];l[5].steps=[{h:0.33,r:2.67},{},{},{},"one-third-tile"]}}}else{if(t===2){if(k===0){l[0].steps=[{h:[0.33,0.5],r:[0.33,0]},{},{},{},{r:[-1,1]},{r:2},{},"one-third-tile"];l[1].steps=[{h:[0.33,0.5],r:[0.67,0.5]},{c:0},{},{},{r:[-1,1.5]},{r:[2.33,2.5]},{},"one-third-tile"];l[2].steps=[{h:[0.33,0.5]},{},{},{r:[-1,2]},{r:[2.67,-1],c:[-1,1]},{},{},"one-third-tile"];l[3].steps=[{h:[0.5,0.5],r:1.5},{r:[2,2.5]},{},{},{},{},{},"half-tile"];l[4].steps=[{h:[0.67,0.5],r:[1.33,1.5]},{},{c:1},{c:1},{h:2,r:0},{},{c:0,w:2},"open-tile"];l[5].steps=[{h:0.5,r:2.5},{},{},{},{},{},{},"half-tile"]}else{if(k===1){l[0].steps=[{h:0.5},{},{},{},{},{r:2},{},"half-tile"];l[1].steps=[{h:0.5,r:0.5},{c:0},{},{},{},{r:2.5},{},"half-tile"];l[2].steps=[{h:0.33},{},{},{r:2},{c:1},{},{},"one-third-tile"];l[3].steps=[{h:0.33,r:1.33},{c:0},{},{r:2.33},{c:1},{},{},"one-third-tile"];l[4].steps=[{},{},{},{h:0.33,r:2.67},{c:1},{},{},"one-third-tile"];l[5].steps=[{},{},{r:1},{h:2,r:0},{},{},{w:2,c:0},"open-tile"]}}}}}}else{if(g.columns===1){for(s=0,p=0;s<6;s+=1){if(t===s){l[s].steps=[{w:1/m,c:s/m},{r:0},{w:1,c:0},{h:5},"fluid-tile"]}else{l[s].steps=[{w:1/m,c:s/m},{r:5},{w:1/(m-1),c:p/(m-1)},{},"button"];p+=1}}}}}o.steps=l[0].steps.length-1;u=[];for(s=0;s<g.tiles.length;s+=1){w=g.tiles[s];for(p=0;p<w.length;p+=1){q=l.shift();q.data=w[p];u.push(q)}}d.each(u,function(){var D,i,B,j,E,z,y,x,C,A;D=this;B=D.data.node;j=g.tileHeight-g.tilePadding*2;E=g.tileWidth-g.tilePadding*2;C=B.data("data").defaultLayout;z=C.x;y=C.y;i=[];A={h:j,w:E,x:z,y:y};x=D.steps.pop();d.each(D.steps,function(){var K,H,G,L,F,I,M,J;K=this;H=[null,null,"",""];J=function(N){var Q,R,P,O;N+=g.tilePadding*2;Q={3:"wide-button",4:"one-third-tile",5:"half-tile",7:"two-thirds-tile",8:"wide-tile",10:g.defaultSizeClass,18:"open-tile",20:"open-tile",50:"open-tile"};P=Math.ceil(N/g.tileHeight*10);R=Q[P];O=R||((P>10)?"":g.defaultSizeClass);return O};for(G in K){if(K.hasOwnProperty(G)){if(d.isArray(K[G])){F={6:0,5:1,4:2,3:3,2:0,1:0};F=F[g.classIds.length];L=K[G][F];if(L===-2){F=0;L=K[G][0]}if(G==="h"&&F!==0&&(d.inArray(x,["one-third-tile","half-tile","two-thirds-tile"])>-1)){x=(L===0.33)?"one-third-tile":(L===0.5)?"half-tile":(L===0.67)?"two-thirds-tile":(L===1)?g.defaultSizeClass:x}}else{L=K[G]}if(L>=0){if(!H[0]){H=[{},{},"",""]}if(d.inArray(x,["fluid-tile","wide-tile","button","wide-button"])>=0){I=L-Math.floor(L)}else{I={"0":0,"25":1/4,"33":1/3,"5":0.5,"67":2/3,"75":3/4};I=I[String(L).split(".")[1]||0]}M=(G==="r"||G==="h")?g.tileHeight:g.tileWidth;L=(M*Math.floor(L))+(M*I);if(G==="r"){L+=g.tilePadding+g.paddingTop;H[0].top=A.y=L;H[1].top=y;y=L}else{if(G==="c"){L+=g.tilePadding+g.paddingLeft;H[0].left=A.x=L;H[1].left=z;z=L}else{if(G==="h"){L-=g.tilePadding*2;H[0].height=A.h=L;H[1].height=j;H[2]=J(H[0].height);H[3]=J(j);j=L}else{if(G==="w"){L-=g.tilePadding*2;H[0].width=A.w=L;H[1].width=E;E=L}}}}}}}i.push(H)});if(x==="fluid-tile"||x==="wide-tile"){x="open-tile"}D.data.openTileClass=x;D.data.animation=i;D.data.shuffleLayout=A})},setGrid:function(o){var C,t,k,v,u,p,n,A,z,B,q,s,g,m,l,r;C=o.node;g=o.grid;m=o.settings;g.defaultSizeClass="tile";l=g.classIds.length;k=C.height();if(m.layout==="fluid"){t=(g.init)?C.parent().width():C.width();if(t===0&&g.init){return false}g.columns=Math.floor(t/m.tileWidth);g.columns=(g.columns>3)?3:(g.columns<1)?1:g.columns;if(g.columns===1){g.tileHeight=m.tileHeight*0.25;g.tilePadding=m.tilePadding*0.5;g.tileWidth=t-g.tilePadding*2;g.defaultSizeClass="wide-button"}else{g.tileHeight=m.tileHeight;g.tilePadding=m.tilePadding;g.tileWidth=m.tileWidth}g.rows=Math.ceil(l/g.columns)}else{t=C.width();g.columns=m.columns}g.rows=Math.ceil(l/g.columns);g.gridWidth=g.tileWidth*g.columns;g.gridHeight=g.tileHeight*g.rows;C.css({height:g.gridHeight+"px",width:g.gridWidth+"px"});C.removeClass("columns-1 columns-2 columns-3").addClass("columns-"+g.columns);g.paddingLeft=parseInt(C.css("paddingLeft"),10);g.paddingTop=parseInt(C.css("paddingTop"),10);g.selectedTile=false;g.status="home";o.animation={status:"off",step:-1,stepProgress:-1,steps:0};g.tiles=[];v=g.classIds.slice(0);for(p=0;p<g.rows;p+=1){g.tiles[p]=[];for(n=0;n<g.columns;n+=1){u=v.shift();if(u){s=d("."+u,C);s.attr("style","");A=g.tilePadding+(n*g.tileWidth)+g.paddingLeft;z=g.tilePadding+(p*g.tileHeight)+g.paddingTop;B=g.tileWidth-g.tilePadding*2;q=g.tileHeight-g.tilePadding*2;if(g.columns===1){r=g.tileHeight*(g.rows-1)}else{if(s.hasClass("wide-tile")){r=g.tileHeight*1.75}else{r=g.tileHeight*2}}g.tiles[p][n]={classId:u,node:s,row:p,column:n,animation:{},shuffleLayout:{},defaultLayout:{w:B,h:q,x:A,y:z},contentStyles:a.getTileMetics(s,g.defaultSizeClass,m),openTileClass:g.defaultSizeClass,openTileHeight:r};s.data("data",g.tiles[p][n]);s.css({position:"absolute",width:B+"px",height:q+"px",top:z+"px",left:A+"px"});s.removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile").addClass(g.defaultSizeClass);a.setTile(s,o,false)}}}C.trigger("onLayout",d.extend({},g));g.init=true},setTile:function(i,j,g){var k,h;k=j.node;h=j.settings;if(g){d(".closeBtn",i).show();d(".content",i).fadeIn();i.css({overflow:h.tileOverflow,cursor:"auto"});i.unbind("click.shufflingTiles mouseenter.shufflingTiles mouseleave.shufflingTiles")}else{d(".closeBtn",i).hide();d(".content",i).hide();i.bind("click.shufflingTiles",a.onClick);i.css({overflow:"hidden"});i.bind("mouseenter.shufflingTiles",a.onMouseOver);i.bind("mouseleave.shufflingTiles",a.onMouseOut)}},setEvent:function(n){var l,g,m,o,k,h;l=n.grid;g={columns:l.columns,rows:l.rows,selectedTile:null,status:l.status,grid:n.node.get(0),tileOverflow:l.tileOverflow,tiles:[]};for(k=0;k<l.tiles.length;k+=1){o=l.tiles[k];for(h=0;h<o.length;h+=1){m=o[h];g.tiles.push({node:m.node.get(0),row:m.row,column:m.column,defaultLayout:m.defaultLayout,shuffleLayout:m.shuffleLayout});if(m.classId===l.selectedTile){g.selectedTile=m.node.data("classId")}}}return g},resizeGrid:function(n){var q,r,v,m,g,i,l,k,p,h,t,s,o,u,j;g=n.grid;m=n.settings;if(!g.selectedTile||m.tileOverflow!=="visible"){return}v=n.node;k=m.openSpeed/n.animation.steps;q=d("."+g.selectedTile,v);r=d(".shufflingTiles-tile",v);i=d(".content",q);o=q.data("data").openTileHeight;u=q.height();p=Math.max(o,u);h=p+q.offset().top;t=i.height()+parseInt(i.css("paddingBottom"),10);s=t+i.offset().top;l=s-h;if(l+u<o){l=0;if(u>o){r.each(function(){var x,w;w=d(this);x=w.data("data").shuffleLayout;if(w.data("classId")===g.selectedTile){w.animate({height:x.h},k)}else{w.animate({top:x.y},k)}});v.animate({height:g.gridHeight},k)}}g.tileOverflow=l;if(g.tileOverflow!==0){j=v.height()+g.tileOverflow;r.each(function(){var x,z,w,y;x=d(this);w=x.height();z=x.position().top;if(x.data("classId")===g.selectedTile){x.animate({height:w+g.tileOverflow},k)}else{if(x.offset().top+g.tilePadding>=h||v.hasClass("columns-1")||v.hasClass("columns-2")||q.hasClass("wide-tile")){y=z+g.tileOverflow+x.height();x.animate({top:z+g.tileOverflow},k);j=Math.max(j,z+g.tileOverflow+x.height())}}});v.animate({height:j},k)}},onClick:function(){var j,i,g,h;j=d(this).parents(".shufflingTiles-grid");i=j.data("data");g=i.settings;h=i.animation;if(h.status!=="off"){return}d(".shufflingTiles-tile",j).removeClass("selected");d(".flyout-box",j).hide();j.addClass("animating");if(d(this).hasClass("shufflingTiles-tile")){d(this).addClass("selected").css({cursor:"auto"})}a.animateTiles.apply(d(this),[i]);return false},onMouseOver:function(){var h,j,i,g;h=d(this);j=h.parent().data("data");i=j.animation;g=j.grid;d(".flyout-box",j.node).hide();h.css({cursor:"pointer"});if(i.status!=="off"||h.data("classId")===g.selectedTile){return}d(".flyout-box",h).each(function(){var k,p,m,l,n,o;l=d(this);n=d(".flyout-subheading",l);k=h.height();p=h.width();l.css({width:p,top:k,display:"block"});n.css({left:-p});m=n.height();o=function(){n.animate({left:0},600)};l.animate({top:k-m},800,o)})},onMouseOut:function(){var g;g=d(this);g.css({cursor:"auto"});d(".flyout-box",g).each(function(){var h=g.height();d(this).animate({top:h},200,function(){d(this).css({display:"none"})})})},onHashChange:function(k){var j,g,i,h;j=(document.location.hash).replace("#","");if(k.length===1){h="tile"+j.substring(j.length-1);g=d("."+h,k);i=k.data("data");if(i.animation.status==="off"&&i.grid.selectedTile!==h){g.click()}}},onTileOpen:function(m,l){var k,i,n,j,h,g;n=l.node;j=l.settings;h=l.grid;k=d("."+m,n);i=d(".shufflingTiles-tile",n);g=d(".content",k);n.removeClass("animating");a.setTile(k,l,true);i.each(function(){var o,p;o=d(this);o.removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile");if(o.data("classId")===m){o.addClass("open-tile")}else{p=o.data("data").openTileClass;o.addClass(p)}});if(g.length===1){a.resizeGrid(l)}if(j.deepLinking){document.location.hash=n.attr("id")+m.replace("tile","");d("body").prop("hash",document.location.hash)}n.trigger("tileOpen",a.setEvent(l))},onTileClose:function(m,l){var j,h,n,i,g,k;n=l.node;i=l.settings;k=i.openSpeed/l.animation.steps;g=l.grid;j=d("."+m,n);h=d(".shufflingTiles-tile",n);a.setTile(j,l,false);h.each(function(){var o=d(this);o.removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile").addClass(g.defaultSizeClass)});setTimeout(function(){n.animate({height:g.gridHeight},k*3)},k);g.tileOverflow=0;j.addClass("visited");n.trigger("tileClose",a.setEvent(l))},resizeThrottle:function(){if(new Date()-f<e){setTimeout(a.resizeThrottle,e)}else{c=false;a.onResize()}},onResize:function(){d(".shufflingTiles-grid").each(function(){var k,j,h,i,g,m,l;m=d(this);k=m.data("data");j=k.settings;h=k.grid;if(j.layout!=="fluid"||k.animation.status!=="off"){return}if(h.selectedTile){g="."+h.selectedTile;i=d("."+h.selectedTile,k.node);i.removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile").addClass(h.defaultSizeClass);a.setTile(i,k,false);l=+new Date();if(!i.prop("timer")||l-i.prop("timer")>15000){setTimeout(function(){d(g,k.node).click()},250);i.prop("timer",l)}}m.shufflingTiles("setGrid")})},showErrors:function(h){var g=(d.isArray(h))?h.join("\n"):h;window.alert(g);d.error(g)},debugTile:function(t,j){var o,i,n,s,m,k,g,h,l,q,p,r;g=j.grid;s=j.node;o=t[0];n=d("."+o,s);m={button:0.25,"wide-button":0.25,"one-third-tile":1/3,"half-tile":0.5,"two-thirds-tile":2/3,tile:1,"open-tile":2,"wide-tile":1.75};l=g.tileHeight;q=g.tileWidth;p=g.tilePadding*2;i=t[1]||g.columns;s.removeClass("columns-1 columns-2 columns-3").addClass("columns-"+i);if(j.settings.layout==="fluid"){h=["button","wide-button","one-third-tile","half-tile","two-thirds-tile","tile"]}else{if(i===1){h=["button","wide-button"]}else{h=["one-third-tile","half-tile","two-thirds-tile","tile"]}}if(n.hasClass("wide-tile")){h.push("wide-tile")}else{h.push("open-tile")}if(d(".wide-tile",s).length>0){h.push("wide-button")}d(".icon, .heading, .subheading, .content",n).attr("style","");d(".content",n).hide();n.attr("style","").removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile wide-tile");k=n.clone().wrapAll("<div>").parent().html();s.empty().html("<h1 id='debugTileTitle' style='margin:0; padding:0;'>"+i+" Column Layout<h1>");r=p+d("#debugTileTitle").height();d.each(m,function(x,w){var v,u;u=l*w;v=d(k).addClass(x).height(u).attr("title",x);if(d.inArray(x,h)===-1){v.css("border","2px #ff0000 solid").attr("id","")}if(x==="wide-tile"){v.width(q*3);v.addClass("open-tile selected");a.setTile(v,j,true)}else{if(x==="button"){v.width(q/(g.classIds.length-1))}else{if(x==="open-tile"){v.width((i===1)?q:q*2);v.addClass("selected");a.setTile(v,j,true)}else{v.width(q)}}}v.css({position:"absolute",top:r+"px",left:p+"px"});r+=u+p;s.append(v)});s.css({height:r+"px",width:q*3+p+"px"})},getTileMetics:function(m,o,i){var h,n,l,j,k,g;g=[m.attr("class"),m.attr("style")];n=i.animateTileContent;l=["button","wide-button","one-third-tile","half-tile","two-thirds-tile","tile","open-tile","wide-tile"];j=l.join(" ");h={};k=function(q){var r,p;r=["width","height","top","left","marginTop","marginLeft","paddingTop","paddingLeft","fontSize"];p={position:q.css("position"),display:q.css("display"),visibility:q.css("visibility")};d.each(r,function(){var t,s;t=String(this);s=q.css(t);p[t]=(s==="auto")?"auto":parseInt(s,10)});return p};d.each(n,function(){var q,s,p,t,r;s=String(this);q=d("."+s,m);q.attr("style","");if(q.length===1&&i.animateTileContent){m.removeClass(j).addClass(o);p=k(q);t=[];h[s]={};d.each(l,function(){var v,u;v=String(this);if(v===o){return true}u=false;m.removeClass(j).addClass(v);d.each(k(q),function(w,x){if(p[w]!==x){if(!u){u={}}u[w]=x;if(d.inArray(w,t)===-1){t.push(w)}}});if(u||v==="open-tile"){h[s][v]=u}});r={};d.each(t,function(){var u=String(this);r[u]=p[u]});d.each(h[s],function(v,u){h[s][v]=d.extend({},r,u)});h[s].node=q;h[s][o]=r;q.css(h[s][o])}else{h[s]=false}});m.attr("class",g[0]);m.attr("style",g[1]);return h}};d.fn.shufflingTiles=function(g){var j,i,h;if(g==="resizeGrid"){return a.resizeGrid(this.data("data"))}if(g==="setGrid"){return a.setGrid(this.data("data"))}h={tileWidth:256,tileHeight:240,tilePadding:3,tileOverflow:"visible",columns:3,tileCount:6,layout:"fixed",openSpeed:2400,closeSpeed:1200,animationEasing:"swing",deepLinking:false,debugTile:false,animateTileContent:["icon","heading","subheading","content"]};j=[];if(g){if(g.columns){if(6%g.columns!==0){j.push("The number of set columns for the Shuffling Tiles plugin can only be 1, 2 or 3.")}g.columns=parseInt(g.columns,10)}if(g.debugTile){if(!d.isArray(g.debugTile)){j.push("The debugTile option set for the Shuffling Tiles plugin must be an array.")}else{if(!g.debugTile[0].match(/^tile(\d)$/)){j.push("The first array item for debugTile in the Shuffling Tiles plugin can only be one of the following: tile1, tile2, tile3, tile4, tile5, tile6")}else{if(g.debugTile[1]&&6%g.debugTile[1]!==0){j.push("The first array item for debugTile in the Shuffling Tiles plugin can only be 1, 2 or 3.")}}}}if(g.animateTileContent){if(!d.isArray(g.animateTileContent)){j.push("The animateTileContent option set for the Shuffling Tiles plugin must be an array.")}g.animateTileContent=d.grep(g.animateTileContent,function(k){if(d.inArray(k,h.animateTileContent)===-1){j.push(k+"is not a valid configuration option for animateTileContent in the Shuffling Tiles plugin.");return false}return true})}if(g.layout&&g.layout!=="fixed"&&g.layout!=="fluid"){j.push("The layout option for the Shuffling Tiles plugin can only be set to fixed or fluid.")}d.each(["tileWidth","tileHeight","tilePadding","tileCount","openSpeed","closeSpeed"],function(){var k=String(this);if(typeof g[k]==="undefined"){return true}if(isNaN(g[k])){j.push("The "+k+" option for the Shuffling Tiles plugin must be a valid number.")}g[k]=parseInt(g[k],10);if(g[k]===0){g[k]=1}});if(j.length>0){a.showErrors(j)}}i=d.extend(h,g);return this.each(function(){var l,o,m,n,k;k=1200;o=d(this);m={settings:i,node:o,animation:null};m.grid={columns:null,rows:null,init:false,gridWidth:null,gridHeight:null,tileWidth:i.tileWidth,tileHeight:i.tileHeight,tilePadding:i.tilePadding,tileOverflow:0,status:null,defaultSizeClass:null,selectedTile:false,openTile:false,classIds:[],tiles:[]};o.data("data",m);o.css({position:"relative"});o.addClass("shufflingTiles-grid");if(i.layout==="fluid"){o.addClass("fluid-layout")}n=d(".open-tile",o);l=o.children();if(l.length>6){a.showErrors("The Shuffling Tiles container element "+o.attr("id")+" cannot have more than 6 child elements/tiles.")}l.each(function(r,u){var s,p,q,t;s=d(u);if(r>=i.tileCount||r>6){s.hide();return true}if(!s.hasClass("open-tile")&&d(".closeBtn",s).length===0){s.prepend(d('<a href="javascript:void(0)" class="closeBtn" >&#215;</a>'))}d(".closeBtn",s).hide().bind("click.shufflingTiles",a.onClick).css("cursor","pointer");q=d(".flyout-subheading",s);if(q.length===1){q.wrap('<div class="flyout-box" />');p=d(".flyout-box",s);p.css({display:"none",position:"absolute",top:i.tileHeight,height:q.height()});q.addClass("flyout-subheading")}t="tile"+(r+1);s.data("classId",t);s.addClass("shufflingTiles-tile "+t);m.grid.classIds.push(t);a.setTile(s,m,false)});a.setGrid(m);if(n.length>1){a.showErrors('Only one item can have the "open-tile" class set for the the Shuffling Tiles plugin.')}else{if(n.length===1){m.grid.openTile=n.data("classId")}}if(i.deepLinking){if(typeof(window.onhashchange)!=="undefined"&&(!document.documentMode||document.documentMode>7)){d(window).bind("hashchange.shufflingTiles",function(){a.onHashChange(o)})}else{d("body").prop("hash",document.location.hash);setInterval(function(){var p=d("body").prop("hash");if(p!==document.location.hash){a.onHashChange(o)}},k/2)}}if(d.inArray(document.location.hash.substr(-1),["1","2","3","4","5","6"])>-1){setTimeout(function(){a.onHashChange(o)},k)}else{if(n.length===1){setTimeout(function(){n.click()},k)}}if(i.debugTile){a.debugTile(i.debugTile,m)}})}}(jQuery));(function(d){var a,f,c,e,b;b=d(window).width();f=new Date(1,1,2000);c=false;e=200;d(window).resize(function(){var g=d(window).width();if(Math.abs(g-b)<30){return}b=g;f=new Date();if(c===false){c=true;setTimeout(a.resizeThrottle,e)}});a={animateTiles:function(q){var u,r,p,v,o,t,g,n,m,l,w,s,h,k;if(!q){return}v=q.node;g=q.grid;n=q.animation;m=q.settings;n.stepProgress+=1;if(n.stepProgress===g.classIds.length){n.stepProgress=0;if(n.status==="openingTile"){n.step+=1;if(n.step===n.steps){g.status="openTile";n.status="off";n.stepProgress=-1;v.trigger("shuffleStop",a.setEvent(q));a.onTileOpen(g.selectedTile,q);return}}else{if(n.status==="closingTile"){n.step-=1;if(n.step===-1){g.status="home";n.status="off";n.stepProgress=-1;v.trigger("shuffleStop",a.setEvent(q));if(g.selectedTile){d("."+g.selectedTile,v).click()}else{if(g.openTile){d("."+g.openTile,v).click()}else{if(m.deepLinking){document.location.hash=v.attr("id")+"-home"}v.removeClass("animating")}}return}}}}else{if(n.status!=="off"){return}}if(n.status==="off"){if(g.status==="home"){a.setAnimation(d(this),q);n.step=0;n.status="openingTile";if(g.columns===2&&g.classIds.length<=4){v.animate({height:"+="+g.tileHeight},m.openSpeed/4)}}else{if(g.status==="openTile"){n.step=n.steps-1;n.status="closingTile";a.onTileClose(g.selectedTile,q);if(g.columns===2&&g.classIds.length<=4){v.animate({height:"-="+g.tileHeight},m.closeSpeed/4)}}}u=d(this).data("classId");if(d.inArray(u,g.classIds)===-1){u=false}g.selectedTile=u;v.trigger("shuffleStart",a.setEvent(q))}l=function(){a.animateTiles.apply(d(this),[d(this).parent().data("data")])};t=m.animationEasing;o=(n.status==="openingTile")?m.openSpeed/n.steps:m.closeSpeed/n.steps;for(r=0;r<g.tiles.length;r+=1){w=g.tiles[r];for(p=0;p<w.length;p+=1){h=w[p].animation;s=(n.status==="openingTile")?h[n.step][0]:h[n.step][1];if(s){w[p].node.animate(s,o,t,l);k=(n.status==="openingTile")?h[n.step][2]:h[n.step][3];a.animateTileContent(w[p].node,k,o,m)}else{n.stepProgress+=1}}}},animateTileContent:function(i,j,k,h){var g=i.data("data").contentStyles;d.each(g,function(n,p){var m,l,o,q;if(n===false||!j||!p[j]){return true}m=p.node;q=p[j];l={};o={};d.each(q,function(s,r){if(isNaN(r)){o[s]=r}else{l[s]=r}});m.css(o);m.animate(l,k,h.animationEasing)})},setAnimation:function(h,r){var t,k,l,u,s,p,g,n,o,m,v,q,w;g=r.grid;n=r.settings;o=r.animation;t=h.data("data").row;k=h.data("data").column;l=[{},{},{},{},{},{}];m=g.classIds.length;if(g.columns===3){if(h.hasClass("wide-tile")){v=h.data("classId");p=0;d.each(g.classIds,function(x,j){j=String(j);if(v===j){l[x].steps=[{w:3/m,c:(x/m)*3},{r:0},{w:3,c:0},{h:1.75},"wide-tile"]}else{l[x].steps=[{w:3/m,c:(x/m)*3},{h:0.25,r:1.75},{w:(1/(m-1))*3,c:(p/(m-1))*3},{},"wide-button"];p+=1}})}else{if(t===0){if(k===0){l[0].steps=[{w:1},{w:2},{h:1.33},{h:2},"open-tile"];l[1].steps=[{h:[0.5,-2,-2,1]},{c:2},{},{},"half-tile"];l[2].steps=[{h:[0.5,-2,-2,1],r:[0.5,-2,-2,1]},{},{},{},"half-tile"];l[3].steps=[{h:[0.33,0.5,1]},{c:2},{},{},"one-third-tile"];l[4].steps=[{r:[1.33,1.5],h:[0.67,0.5]},{h:[0.33,0.5]},{c:2},{},"one-third-tile"];l[5].steps=[{},{r:1.67,h:0.33},{},{},"one-third-tile"]}else{if(k===1){l[0].steps=[{h:[0.67,-2,-2,1]},{},{},{},"two-thirds-tile"];l[1].steps=[{h:[0.67,-2,-2,1]},{w:2},{w:2},{h:2},"open-tile"];l[2].steps=[{h:[0.33,-2,-2,1],r:[0.67,-2,-2,1]},{c:[1,-2,-2,1]},{c:0},{},"one-third-tile"];l[3].steps=[{h:[0.33,0.5,1,1]},{r:[-1,1.5,-1]},{},{},"one-third-tile"];l[4].steps=[{h:[0.67,0.5]},{r:[1.33,-1],h:[0.33,-1]},{c:0},{},"one-third-tile"];l[5].steps=[{h:0.33,r:1.67},{c:0},{},{},"one-third-tile"]}else{if(k===2){l[0].steps=[{h:[0.5,-2,-2,1]},{},{},{},"half-tile"];l[1].steps=[{h:[0.5,-2,-2,1],r:[0.5,-2,-2,1]},{c:0},{},{},"half-tile"];l[2].steps=[{h:1.33},{h:1.67},{h:2},{w:2,c:1},"open-tile"];l[3].steps=[{h:[0.33,0.5,1]},{},{},{},"one-third-tile"];l[4].steps=[{h:[0.67,0.5]},{h:[0.33,-1],r:[1.33,1.5]},{c:0},{},"one-third-tile"];l[5].steps=[{h:0.33,r:1.67},{c:0},{},{},"one-third-tile"]}}}}else{if(t===1){if(k===0){l[0].steps=[{h:[0.33,-2,0.5]},{c:[2,-2,1]},{c:[-1,-2,2]},{h:[-1,-2,1]},"one-third-tile"];l[1].steps=[{h:[0.33,-2,0.5],r:[0.33,-2,0.5]},{},{c:2},{r:[-1,-2,1]},"one-third-tile"];l[2].steps=[{h:[0.33,-2,0.5],r:[0.67,-2,0.5]},{r:[-1,-2,1.5]},{},{},"one-third-tile"];l[3].steps=[{},{w:1},{w:2},{h:2,r:0},"open-tile"];l[4].steps=[{h:[0.5,1]},{c:2},{},{},"half-tile"];l[5].steps=[{h:0.5,r:1.5},{},{},{},"half-tile"]}else{if(k===1){l[0].steps=[{h:0.33},{c:2},{},{},"one-third-tile"];l[1].steps=[{h:0.67,r:0.33},{h:0.33},{c:2},{},"one-third-tile"];l[2].steps=[{h:0.33,r:0.67},{},{},{},"one-third-tile"];l[3].steps=[{h:0.67},{c:2},{h:[-1,1]},{},"half-tile"];l[4].steps=[{h:0.33,r:1.67},{w:2,c:0},{c:0},{h:2,r:0},"open-tile"];l[5].steps=[{h:0.33,r:1.67},{},{},{},"half-tile"]}else{if(k===2){l[0].steps=[{h:0.33},{},{},{},"one-third-tile"];l[1].steps=[{h:0.67},{h:0.33,r:0.33},{c:0},{},"one-third-tile"];l[2].steps=[{h:0.33,r:0.67},{c:0},{},{},"one-third-tile"];l[3].steps=[{h:0.5},{},{},{},"half-tile"];l[4].steps=[{h:0.5,r:1.5},{c:0},{},{},"half-tile"];l[5].steps=[{},{w:2,c:1},{c:1},{r:0,h:2},"open-tile"]}}}}}}}else{if(g.columns===2){if(t===0){if(k===0){l[0].steps=[{h:1},{h:1},{w:2},{w:2},{h:2},"open-tile"];l[1].steps=[{h:1.5},{r:1,h:[0.5,-2,-2,1]},{},{c:[0,-2,-2,1]},{r:2},"half-tile"];l[2].steps=[{h:[0.5,-2,-2,1],r:1.5},{},{},{},{r:[2.5,-2,-2,2]},"half-tile"];l[3].steps=[{h:[0.33,-2,1,1],r:1.67},{r:2},{},{h:[-2,0.5]},{},"one-third-tile"];l[4].steps=[{h:0.33,r:2.33},{c:1},{h:[-2,0.5]},{r:[-2,2.5]},{},"one-third-tile"];l[5].steps=[{h:0.33,r:2.67},{},{},{},{},"one-third-tile"]}else{if(k===1){l[0].steps=[{h:[0.5,-2,-2,0.5],r:[0.5,-2,-2,0.5]},{r:1},{r:2,h:[-2,-2,-2,1]},"half-tile"];l[1].steps=[{h:0.5},{w:2,c:0},{h:2},"open-tile"];l[2].steps=[{h:[0.5,-2,-2,1],r:[1.5,-2,-2,1],c:[-2,-2,-2,1]},{},{r:[2.5,-2,-2,2]},"half-tile"];l[3].steps=[{h:[0.33,-2,1],r:1.67},{r:2},{h:[-2,0.5]},"one-third-tile"];l[4].steps=[{h:[0.33,0.5],r:[2.33,2.5]},{c:1},{},"one-third-tile"];l[5].steps=[{h:0.33,r:2.67},{},{},"one-third-tile"]}}}else{if(t===1){if(k===0){l[0].steps=[{h:[0.5,-2,-2,1]},{},{r:2},{h:[-1,-2,-2,1]},"half-tile"];l[1].steps=[{h:[0.5,-2,-2,1],r:[0.5,-2,-2,2]},{c:[0,-2,-2,1]},{r:[2.5,-2,-2,2]},{},"half-tile"];l[2].steps=[{},{c:1},{h:2,r:0},{c:0,w:2},"open-tile"];l[3].steps=[{h:[0.33,-2,1],r:2},{},{r:[-1,2]},{h:[-1,0.5]},"one-third-tile"];l[4].steps=[{h:0.33,r:2.33},{c:1},{h:[-1,0.5]},{r:[-1,2.5]},"one-third-tile"];l[5].steps=[{h:0.33,r:2.67},{},{},{},"one-third-tile"]}else{if(k===1){l[0].steps=[{h:0.5},{},{r:2},{},"half-tile"];l[1].steps=[{h:0.5,r:0.5},{c:0},{r:2.5},{},"half-tile"];l[2].steps=[{h:0.33,r:2},{c:1},{},{h:[-1,0.5,1]},"one-third-tile"];l[3].steps=[{},{},{h:2,r:0},{c:0,w:2},"open-tile"];l[4].steps=[{h:0.33,r:2.33},{c:1},{h:[-1,0.5]},{r:[-1,2.5]},"one-third-tile"];l[5].steps=[{h:0.33,r:2.67},{},{},{},"one-third-tile"]}}}else{if(t===2){if(k===0){l[0].steps=[{h:[0.33,0.5],r:[0.33,0]},{},{},{},{r:[-1,1]},{r:2},{},"one-third-tile"];l[1].steps=[{h:[0.33,0.5],r:[0.67,0.5]},{c:0},{},{},{r:[-1,1.5]},{r:[2.33,2.5]},{},"one-third-tile"];l[2].steps=[{h:[0.33,0.5]},{},{},{r:[-1,2]},{r:[2.67,-1],c:[-1,1]},{},{},"one-third-tile"];l[3].steps=[{h:[0.5,0.5],r:1.5},{r:[2,2.5]},{},{},{},{},{},"half-tile"];l[4].steps=[{h:[0.67,0.5],r:[1.33,1.5]},{},{c:1},{c:1},{h:2,r:0},{},{c:0,w:2},"open-tile"];l[5].steps=[{h:0.5,r:2.5},{},{},{},{},{},{},"half-tile"]}else{if(k===1){l[0].steps=[{h:0.5},{},{},{},{},{r:2},{},"half-tile"];l[1].steps=[{h:0.5,r:0.5},{c:0},{},{},{},{r:2.5},{},"half-tile"];l[2].steps=[{h:0.33},{},{},{r:2},{c:1},{},{},"one-third-tile"];l[3].steps=[{h:0.33,r:1.33},{c:0},{},{r:2.33},{c:1},{},{},"one-third-tile"];l[4].steps=[{},{},{},{h:0.33,r:2.67},{c:1},{},{},"one-third-tile"];l[5].steps=[{},{},{r:1},{h:2,r:0},{},{},{w:2,c:0},"open-tile"]}}}}}}else{if(g.columns===1){for(s=0,p=0;s<6;s+=1){if(t===s){l[s].steps=[{w:1/m,c:s/m},{r:0},{w:1,c:0},{h:5},"fluid-tile"]}else{l[s].steps=[{w:1/m,c:s/m},{r:5},{w:1/(m-1),c:p/(m-1)},{},"button"];p+=1}}}}}o.steps=l[0].steps.length-1;u=[];for(s=0;s<g.tiles.length;s+=1){w=g.tiles[s];for(p=0;p<w.length;p+=1){q=l.shift();q.data=w[p];u.push(q)}}d.each(u,function(){var D,i,B,j,E,z,y,x,C,A;D=this;B=D.data.node;j=g.tileHeight-g.tilePadding*2;E=g.tileWidth-g.tilePadding*2;C=B.data("data").defaultLayout;z=C.x;y=C.y;i=[];A={h:j,w:E,x:z,y:y};x=D.steps.pop();d.each(D.steps,function(){var K,H,G,L,F,I,M,J;K=this;H=[null,null,"",""];J=function(N){var Q,R,P,O;N+=g.tilePadding*2;Q={3:"wide-button",4:"one-third-tile",5:"half-tile",7:"two-thirds-tile",8:"wide-tile",10:g.defaultSizeClass,18:"open-tile",20:"open-tile",50:"open-tile"};P=Math.ceil(N/g.tileHeight*10);R=Q[P];O=R||((P>10)?"":g.defaultSizeClass);return O};for(G in K){if(K.hasOwnProperty(G)){if(d.isArray(K[G])){F={6:0,5:1,4:2,3:3,2:0,1:0};F=F[g.classIds.length];L=K[G][F];if(L===-2){F=0;L=K[G][0]}if(G==="h"&&F!==0&&(d.inArray(x,["one-third-tile","half-tile","two-thirds-tile"])>-1)){x=(L===0.33)?"one-third-tile":(L===0.5)?"half-tile":(L===0.67)?"two-thirds-tile":(L===1)?g.defaultSizeClass:x}}else{L=K[G]}if(L>=0){if(!H[0]){H=[{},{},"",""]}if(d.inArray(x,["fluid-tile","wide-tile","button","wide-button"])>=0){I=L-Math.floor(L)}else{I={"0":0,"25":1/4,"33":1/3,"5":0.5,"67":2/3,"75":3/4};I=I[String(L).split(".")[1]||0]}M=(G==="r"||G==="h")?g.tileHeight:g.tileWidth;L=(M*Math.floor(L))+(M*I);if(G==="r"){L+=g.tilePadding+g.paddingTop;H[0].top=A.y=L;H[1].top=y;y=L}else{if(G==="c"){L+=g.tilePadding+g.paddingLeft;H[0].left=A.x=L;H[1].left=z;z=L}else{if(G==="h"){L-=g.tilePadding*2;H[0].height=A.h=L;H[1].height=j;H[2]=J(H[0].height);H[3]=J(j);j=L}else{if(G==="w"){L-=g.tilePadding*2;H[0].width=A.w=L;H[1].width=E;E=L}}}}}}}i.push(H)});if(x==="fluid-tile"||x==="wide-tile"){x="open-tile"}D.data.openTileClass=x;D.data.animation=i;D.data.shuffleLayout=A})},setGrid:function(o){var C,t,k,v,u,p,n,A,z,B,q,s,g,m,l,r;C=o.node;g=o.grid;m=o.settings;g.defaultSizeClass="tile";l=g.classIds.length;k=C.height();if(m.layout==="fluid"){t=(g.init)?C.parent().width():C.width();if(t===0&&g.init){return false}g.columns=Math.floor(t/m.tileWidth);g.columns=(g.columns>3)?3:(g.columns<1)?1:g.columns;if(g.columns===1){g.tileHeight=m.tileHeight*0.25;g.tilePadding=m.tilePadding*0.5;g.tileWidth=t-g.tilePadding*2;g.defaultSizeClass="wide-button"}else{g.tileHeight=m.tileHeight;g.tilePadding=m.tilePadding;g.tileWidth=m.tileWidth}g.rows=Math.ceil(l/g.columns)}else{t=C.width();g.columns=m.columns}g.rows=Math.ceil(l/g.columns);g.gridWidth=g.tileWidth*g.columns;g.gridHeight=g.tileHeight*g.rows;C.css({height:g.gridHeight+"px",width:g.gridWidth+"px"});C.removeClass("columns-1 columns-2 columns-3").addClass("columns-"+g.columns);g.paddingLeft=parseInt(C.css("paddingLeft"),10);g.paddingTop=parseInt(C.css("paddingTop"),10);g.selectedTile=false;g.status="home";o.animation={status:"off",step:-1,stepProgress:-1,steps:0};g.tiles=[];v=g.classIds.slice(0);for(p=0;p<g.rows;p+=1){g.tiles[p]=[];for(n=0;n<g.columns;n+=1){u=v.shift();if(u){s=d("."+u,C);s.attr("style","");A=g.tilePadding+(n*g.tileWidth)+g.paddingLeft;z=g.tilePadding+(p*g.tileHeight)+g.paddingTop;B=g.tileWidth-g.tilePadding*2;q=g.tileHeight-g.tilePadding*2;if(g.columns===1){r=g.tileHeight*(g.rows-1)}else{if(s.hasClass("wide-tile")){r=g.tileHeight*1.75}else{r=g.tileHeight*2}}g.tiles[p][n]={classId:u,node:s,row:p,column:n,animation:{},shuffleLayout:{},defaultLayout:{w:B,h:q,x:A,y:z},contentStyles:a.getTileMetics(s,g.defaultSizeClass,m),openTileClass:g.defaultSizeClass,openTileHeight:r};s.data("data",g.tiles[p][n]);s.css({position:"absolute",width:B+"px",height:q+"px",top:z+"px",left:A+"px"});s.removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile").addClass(g.defaultSizeClass);a.setTile(s,o,false)}}}C.trigger("onLayout",d.extend({},g));g.init=true},setTile:function(i,j,g){var k,h;k=j.node;h=j.settings;if(g){d(".closeBtn",i).show();d(".content",i).fadeIn();i.css({overflow:h.tileOverflow,cursor:"auto"});i.unbind("click.shufflingTiles mouseenter.shufflingTiles mouseleave.shufflingTiles")}else{d(".closeBtn",i).hide();d(".content",i).hide();i.bind("click.shufflingTiles",a.onClick);i.css({overflow:"hidden"});i.bind("mouseenter.shufflingTiles",a.onMouseOver);i.bind("mouseleave.shufflingTiles",a.onMouseOut)}},setEvent:function(n){var l,g,m,o,k,h;l=n.grid;g={columns:l.columns,rows:l.rows,selectedTile:null,status:l.status,grid:n.node.get(0),tileOverflow:l.tileOverflow,tiles:[]};for(k=0;k<l.tiles.length;k+=1){o=l.tiles[k];for(h=0;h<o.length;h+=1){m=o[h];g.tiles.push({node:m.node.get(0),row:m.row,column:m.column,defaultLayout:m.defaultLayout,shuffleLayout:m.shuffleLayout});if(m.classId===l.selectedTile){g.selectedTile=m.node.data("classId")}}}return g},resizeGrid:function(n){var q,r,v,m,g,i,l,k,p,h,t,s,o,u,j;g=n.grid;m=n.settings;if(!g.selectedTile||m.tileOverflow!=="visible"){return}v=n.node;k=m.openSpeed/n.animation.steps;q=d("."+g.selectedTile,v);r=d(".shufflingTiles-tile",v);i=d(".content",q);o=q.data("data").openTileHeight;u=q.height();p=Math.max(o,u);h=p+q.offset().top;t=i.height()+parseInt(i.css("paddingBottom"),10);s=t+i.offset().top;l=s-h;if(l+u<o){l=0;if(u>o){r.each(function(){var x,w;w=d(this);x=w.data("data").shuffleLayout;if(w.data("classId")===g.selectedTile){w.animate({height:x.h},k)}else{w.animate({top:x.y},k)}});v.animate({height:g.gridHeight},k)}}g.tileOverflow=l;if(g.tileOverflow!==0){j=v.height()+g.tileOverflow;r.each(function(){var x,z,w,y;x=d(this);w=x.height();z=x.position().top;if(x.data("classId")===g.selectedTile){x.animate({height:w+g.tileOverflow},k)}else{if(x.offset().top+g.tilePadding>=h||v.hasClass("columns-1")||v.hasClass("columns-2")||q.hasClass("wide-tile")){y=z+g.tileOverflow+x.height();x.animate({top:z+g.tileOverflow},k);j=Math.max(j,z+g.tileOverflow+x.height())}}});v.animate({height:j},k)}},onClick:function(){var j,i,g,h;j=d(this).parents(".shufflingTiles-grid");i=j.data("data");g=i.settings;h=i.animation;if(h.status!=="off"){return}d(".shufflingTiles-tile",j).removeClass("selected");d(".flyout-box",j).hide();j.addClass("animating");if(d(this).hasClass("shufflingTiles-tile")){d(this).addClass("selected").css({cursor:"auto"})}a.animateTiles.apply(d(this),[i]);return false},onMouseOver:function(){var h,j,i,g;h=d(this);j=h.parent().data("data");i=j.animation;g=j.grid;d(".flyout-box",j.node).hide();h.css({cursor:"pointer"});if(i.status!=="off"||h.data("classId")===g.selectedTile){return}d(".flyout-box",h).each(function(){var k,p,m,l,n,o;l=d(this);n=d(".flyout-subheading",l);k=h.height();p=h.width();l.css({width:p,top:k,display:"block"});n.css({left:-p});m=n.height();o=function(){n.animate({left:0},600)};l.animate({top:k-m},800,o)})},onMouseOut:function(){var g;g=d(this);g.css({cursor:"auto"});d(".flyout-box",g).each(function(){var h=g.height();d(this).animate({top:h},200,function(){d(this).css({display:"none"})})})},onHashChange:function(k){var j,g,i,h;j=(document.location.hash).replace("#","");if(k.length===1){h="tile"+j.substring(j.length-1);g=d("."+h,k);i=k.data("data");if(i.animation.status==="off"&&i.grid.selectedTile!==h){g.click()}}},onTileOpen:function(m,l){var k,i,n,j,h,g;n=l.node;j=l.settings;h=l.grid;k=d("."+m,n);i=d(".shufflingTiles-tile",n);g=d(".content",k);n.removeClass("animating");a.setTile(k,l,true);i.each(function(){var o,p;o=d(this);o.removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile");if(o.data("classId")===m){o.addClass("open-tile")}else{p=o.data("data").openTileClass;o.addClass(p)}});if(g.length===1){a.resizeGrid(l)}if(j.deepLinking){document.location.hash=n.attr("id")+m.replace("tile","");d("body").prop("hash",document.location.hash)}n.trigger("tileOpen",a.setEvent(l))},onTileClose:function(m,l){var j,h,n,i,g,k;n=l.node;i=l.settings;k=i.openSpeed/l.animation.steps;g=l.grid;j=d("."+m,n);h=d(".shufflingTiles-tile",n);a.setTile(j,l,false);h.each(function(){var o=d(this);o.removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile").addClass(g.defaultSizeClass)});setTimeout(function(){n.animate({height:g.gridHeight},k*3)},k);g.tileOverflow=0;j.addClass("visited");n.trigger("tileClose",a.setEvent(l))},resizeThrottle:function(){if(new Date()-f<e){setTimeout(a.resizeThrottle,e)}else{c=false;a.onResize()}},onResize:function(){d(".shufflingTiles-grid").each(function(){var k,j,h,i,g,m,l;m=d(this);k=m.data("data");j=k.settings;h=k.grid;if(j.layout!=="fluid"||k.animation.status!=="off"){return}if(h.selectedTile){g="."+h.selectedTile;i=d("."+h.selectedTile,k.node);i.removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile").addClass(h.defaultSizeClass);a.setTile(i,k,false);l=+new Date();if(!i.prop("timer")||l-i.prop("timer")>15000){setTimeout(function(){d(g,k.node).click()},250);i.prop("timer",l)}}m.shufflingTiles("setGrid")})},showErrors:function(h){var g=(d.isArray(h))?h.join("\n"):h;window.alert(g);d.error(g)},debugTile:function(t,j){var o,i,n,s,m,k,g,h,l,q,p,r;g=j.grid;s=j.node;o=t[0];n=d("."+o,s);m={button:0.25,"wide-button":0.25,"one-third-tile":1/3,"half-tile":0.5,"two-thirds-tile":2/3,tile:1,"open-tile":2,"wide-tile":1.75};l=g.tileHeight;q=g.tileWidth;p=g.tilePadding*2;i=t[1]||g.columns;s.removeClass("columns-1 columns-2 columns-3").addClass("columns-"+i);if(j.settings.layout==="fluid"){h=["button","wide-button","one-third-tile","half-tile","two-thirds-tile","tile"]}else{if(i===1){h=["button","wide-button"]}else{h=["one-third-tile","half-tile","two-thirds-tile","tile"]}}if(n.hasClass("wide-tile")){h.push("wide-tile")}else{h.push("open-tile")}if(d(".wide-tile",s).length>0){h.push("wide-button")}d(".icon, .heading, .subheading, .content",n).attr("style","");d(".content",n).hide();n.attr("style","").removeClass("button wide-button one-third-tile half-tile two-thirds-tile tile open-tile wide-tile");k=n.clone().wrapAll("<div>").parent().html();s.empty().html("<h1 id='debugTileTitle' style='margin:0; padding:0;'>"+i+" Column Layout<h1>");r=p+d("#debugTileTitle").height();d.each(m,function(x,w){var v,u;u=l*w;v=d(k).addClass(x).height(u).attr("title",x);if(d.inArray(x,h)===-1){v.css("border","2px #ff0000 solid").attr("id","")}if(x==="wide-tile"){v.width(q*3);v.addClass("open-tile selected");a.setTile(v,j,true)}else{if(x==="button"){v.width(q/(g.classIds.length-1))}else{if(x==="open-tile"){v.width((i===1)?q:q*2);v.addClass("selected");a.setTile(v,j,true)}else{v.width(q)}}}v.css({position:"absolute",top:r+"px",left:p+"px"});r+=u+p;s.append(v)});s.css({height:r+"px",width:q*3+p+"px"})},getTileMetics:function(m,o,i){var h,n,l,j,k,g;g=[m.attr("class"),m.attr("style")];n=i.animateTileContent;l=["button","wide-button","one-third-tile","half-tile","two-thirds-tile","tile","open-tile","wide-tile"];j=l.join(" ");h={};k=function(q){var r,p;r=["width","height","top","left","marginTop","marginLeft","paddingTop","paddingLeft","fontSize"];p={position:q.css("position"),display:q.css("display"),visibility:q.css("visibility")};d.each(r,function(){var t,s;t=String(this);s=q.css(t);p[t]=(s==="auto")?"auto":parseInt(s,10)});return p};d.each(n,function(){var q,s,p,t,r;s=String(this);q=d("."+s,m);q.attr("style","");if(q.length===1&&i.animateTileContent){m.removeClass(j).addClass(o);p=k(q);t=[];h[s]={};d.each(l,function(){var v,u;v=String(this);if(v===o){return true}u=false;m.removeClass(j).addClass(v);d.each(k(q),function(w,x){if(p[w]!==x){if(!u){u={}}u[w]=x;if(d.inArray(w,t)===-1){t.push(w)}}});if(u||v==="open-tile"){h[s][v]=u}});r={};d.each(t,function(){var u=String(this);r[u]=p[u]});d.each(h[s],function(v,u){h[s][v]=d.extend({},r,u)});h[s].node=q;h[s][o]=r;q.css(h[s][o])}else{h[s]=false}});m.attr("class",g[0]);m.attr("style",g[1]);return h}};d.fn.shufflingTiles=function(g){var j,i,h;if(g==="resizeGrid"){return a.resizeGrid(this.data("data"))}if(g==="setGrid"){return a.setGrid(this.data("data"))}h={tileWidth:256,tileHeight:240,tilePadding:3,tileOverflow:"visible",columns:3,tileCount:6,layout:"fixed",openSpeed:2400,closeSpeed:1200,animationEasing:"swing",deepLinking:false,debugTile:false,animateTileContent:["icon","heading","subheading","content"]};j=[];if(g){if(g.columns){if(6%g.columns!==0){j.push("The number of set columns for the Shuffling Tiles plugin can only be 1, 2 or 3.")}g.columns=parseInt(g.columns,10)}if(g.debugTile){if(!d.isArray(g.debugTile)){j.push("The debugTile option set for the Shuffling Tiles plugin must be an array.")}else{if(!g.debugTile[0].match(/^tile(\d)$/)){j.push("The first array item for debugTile in the Shuffling Tiles plugin can only be one of the following: tile1, tile2, tile3, tile4, tile5, tile6")}else{if(g.debugTile[1]&&6%g.debugTile[1]!==0){j.push("The first array item for debugTile in the Shuffling Tiles plugin can only be 1, 2 or 3.")}}}}if(g.animateTileContent){if(!d.isArray(g.animateTileContent)){j.push("The animateTileContent option set for the Shuffling Tiles plugin must be an array.")}g.animateTileContent=d.grep(g.animateTileContent,function(k){if(d.inArray(k,h.animateTileContent)===-1){j.push(k+"is not a valid configuration option for animateTileContent in the Shuffling Tiles plugin.");return false}return true})}if(g.layout&&g.layout!=="fixed"&&g.layout!=="fluid"){j.push("The layout option for the Shuffling Tiles plugin can only be set to fixed or fluid.")}d.each(["tileWidth","tileHeight","tilePadding","tileCount","openSpeed","closeSpeed"],function(){var k=String(this);if(typeof g[k]==="undefined"){return true}if(isNaN(g[k])){j.push("The "+k+" option for the Shuffling Tiles plugin must be a valid number.")}g[k]=parseInt(g[k],10);if(g[k]===0){g[k]=1}});if(j.length>0){a.showErrors(j)}}i=d.extend(h,g);return this.each(function(){var l,o,m,n,k;k=1200;o=d(this);m={settings:i,node:o,animation:null};m.grid={columns:null,rows:null,init:false,gridWidth:null,gridHeight:null,tileWidth:i.tileWidth,tileHeight:i.tileHeight,tilePadding:i.tilePadding,tileOverflow:0,status:null,defaultSizeClass:null,selectedTile:false,openTile:false,classIds:[],tiles:[]};o.data("data",m);o.css({position:"relative"});o.addClass("shufflingTiles-grid");if(i.layout==="fluid"){o.addClass("fluid-layout")}n=d(".open-tile",o);l=o.children();if(l.length>6){a.showErrors("The Shuffling Tiles container element "+o.attr("id")+" cannot have more than 6 child elements/tiles.")}l.each(function(r,u){var s,p,q,t;s=d(u);if(r>=i.tileCount||r>6){s.hide();return true}if(!s.hasClass("open-tile")&&d(".closeBtn",s).length===0){s.prepend(d('<a href="javascript:void(0)" class="closeBtn" >&#215;</a>'))}d(".closeBtn",s).hide().bind("click.shufflingTiles",a.onClick).css("cursor","pointer");q=d(".flyout-subheading",s);if(q.length===1){q.wrap('<div class="flyout-box" />');p=d(".flyout-box",s);p.css({display:"none",position:"absolute",top:i.tileHeight,height:q.height()});q.addClass("flyout-subheading")}t="tile"+(r+1);s.data("classId",t);s.addClass("shufflingTiles-tile "+t);m.grid.classIds.push(t);a.setTile(s,m,false)});a.setGrid(m);if(n.length>1){a.showErrors('Only one item can have the "open-tile" class set for the the Shuffling Tiles plugin.')}else{if(n.length===1){m.grid.openTile=n.data("classId")}}if(i.deepLinking){if(typeof(window.onhashchange)!=="undefined"&&(!document.documentMode||document.documentMode>7)){d(window).bind("hashchange.shufflingTiles",function(){a.onHashChange(o)})}else{d("body").prop("hash",document.location.hash);setInterval(function(){var p=d("body").prop("hash");if(p!==document.location.hash){a.onHashChange(o)}},k/2)}}if(d.inArray(document.location.hash.substr(-1),["1","2","3","4","5","6"])>-1){setTimeout(function(){a.onHashChange(o)},k)}else{if(n.length===1){setTimeout(function(){n.click()},k)}}if(i.debugTile){a.debugTile(i.debugTile,m)}})}}(jQuery));